<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.zju.ccnt.service.dao.ApiMapper">
  <resultMap id="BaseResultMap" type="edu.zju.ccnt.service.model.Api">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="mark" jdbcType="VARCHAR" property="mark" />
    <result column="api_address" jdbcType="VARCHAR" property="apiAddress" />
    <result column="path" jdbcType="VARCHAR" property="path" />
    <result column="strip_prefix" jdbcType="INTEGER" property="stripPrefix" />
    <result column="description" jdbcType="VARCHAR" property="description" />
    <result column="api_call_way" jdbcType="VARCHAR" property="apiCallWay" />
    <result column="api_introduction" jdbcType="VARCHAR" property="apiIntroduction" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="service_id" jdbcType="INTEGER" property="serviceId" />
    <result column="checked" jdbcType="INTEGER" property="checked" />
    <result column="remarks" jdbcType="VARCHAR" property="remarks" />
    <result column="arguments" jdbcType="VARCHAR" property="arguments" />
    <result column="call_limit" jdbcType="INTEGER" property="callLimit" />
    <result column="call_ip_limit" jdbcType="INTEGER" property="callIpLimit" />
    <result column="result_arguments" jdbcType="VARCHAR" property="resultArguments" />
    <result column="error_code" jdbcType="VARCHAR" property="errorCode" />
    <result column="result" jdbcType="VARCHAR" property="result" />
    <result column="call_example" jdbcType="VARCHAR" property="callExample" />
    <result column="app_key" jdbcType="VARCHAR" property="appKey" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
  </resultMap>

  <resultMap id="apiInfo" type="edu.zju.ccnt.model.ApiCoreInfo">
    <id column="id" jdbcType="INTEGER" property="id" javaType="java.lang.Integer"/>
    <result column="path" jdbcType="VARCHAR" property="path" javaType="java.lang.String"/>
    <result column="service_id" jdbcType="INTEGER" property="serviceId" javaType="java.lang.Integer" />
    <result column="api_address" jdbcType="VARCHAR" property="apiAddress" javaType="java.lang.String"/>
    <result column="strip_prefix" jdbcType="INTEGER" property="stripPrefix" javaType="java.lang.Boolean"/>
    <result column="status" jdbcType="INTEGER" property="status" javaType="java.lang.Boolean"/>
    <result column="checked" jdbcType="INTEGER" property="checked" javaType="java.lang.Boolean"/>
    <result column="name" jdbcType="VARCHAR" property="apiName" javaType="java.lang.String"/>
    <result column="app_key" jdbcType="VARCHAR" property="appKey" javaType="java.lang.String"/>
    <result column="result" jdbcType="VARCHAR" property="result" javaType="java.lang.String"/>
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, name, mark, api_address, path, strip_prefix, description, api_call_way, api_introduction, 
    status, service_id, checked, remarks, arguments, call_limit, call_ip_limit, result_arguments, 
    error_code, result, call_example, app_key, create_time, update_time
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from api
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from api
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="edu.zju.ccnt.service.model.Api">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into api (id, name, mark, 
      api_address, path, strip_prefix, 
      description, api_call_way, api_introduction, 
      status, service_id, checked, 
      remarks, arguments, call_limit, 
      call_ip_limit, result_arguments, error_code, 
      result, call_example, app_key, 
      create_time, update_time)
    values (#{id,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR}, #{mark,jdbcType=VARCHAR}, 
      #{apiAddress,jdbcType=VARCHAR}, #{path,jdbcType=VARCHAR}, #{stripPrefix,jdbcType=INTEGER}, 
      #{description,jdbcType=VARCHAR}, #{apiCallWay,jdbcType=VARCHAR}, #{apiIntroduction,jdbcType=VARCHAR}, 
      #{status,jdbcType=INTEGER}, #{serviceId,jdbcType=INTEGER}, #{checked,jdbcType=INTEGER}, 
      #{remarks,jdbcType=VARCHAR}, #{arguments,jdbcType=VARCHAR}, #{callLimit,jdbcType=INTEGER}, 
      #{callIpLimit,jdbcType=INTEGER}, #{resultArguments,jdbcType=VARCHAR}, #{errorCode,jdbcType=VARCHAR}, 
      #{result,jdbcType=VARCHAR}, #{callExample,jdbcType=VARCHAR}, #{appKey,jdbcType=VARCHAR}, 
      #{createTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="edu.zju.ccnt.service.model.Api">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into api
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="mark != null">
        mark,
      </if>
      <if test="apiAddress != null">
        api_address,
      </if>
      <if test="path != null">
        path,
      </if>
      <if test="stripPrefix != null">
        strip_prefix,
      </if>
      <if test="description != null">
        description,
      </if>
      <if test="apiCallWay != null">
        api_call_way,
      </if>
      <if test="apiIntroduction != null">
        api_introduction,
      </if>
      <if test="status != null">
        status,
      </if>
      <if test="serviceId != null">
        service_id,
      </if>
      <if test="checked != null">
        checked,
      </if>
      <if test="remarks != null">
        remarks,
      </if>
      <if test="arguments != null">
        arguments,
      </if>
      <if test="callLimit != null">
        call_limit,
      </if>
      <if test="callIpLimit != null">
        call_ip_limit,
      </if>
      <if test="resultArguments != null">
        result_arguments,
      </if>
      <if test="errorCode != null">
        error_code,
      </if>
      <if test="result != null">
        result,
      </if>
      <if test="callExample != null">
        call_example,
      </if>
      <if test="appKey != null">
        app_key,
      </if>
      <if test="createTime != null">
        create_time,
      </if>
      <if test="updateTime != null">
        update_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="mark != null">
        #{mark,jdbcType=VARCHAR},
      </if>
      <if test="apiAddress != null">
        #{apiAddress,jdbcType=VARCHAR},
      </if>
      <if test="path != null">
        #{path,jdbcType=VARCHAR},
      </if>
      <if test="stripPrefix != null">
        #{stripPrefix,jdbcType=INTEGER},
      </if>
      <if test="description != null">
        #{description,jdbcType=VARCHAR},
      </if>
      <if test="apiCallWay != null">
        #{apiCallWay,jdbcType=VARCHAR},
      </if>
      <if test="apiIntroduction != null">
        #{apiIntroduction,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        #{status,jdbcType=INTEGER},
      </if>
      <if test="serviceId != null">
        #{serviceId,jdbcType=INTEGER},
      </if>
      <if test="checked != null">
        #{checked,jdbcType=INTEGER},
      </if>
      <if test="remarks != null">
        #{remarks,jdbcType=VARCHAR},
      </if>
      <if test="arguments != null">
        #{arguments,jdbcType=VARCHAR},
      </if>
      <if test="callLimit != null">
        #{callLimit,jdbcType=INTEGER},
      </if>
      <if test="callIpLimit != null">
        #{callIpLimit,jdbcType=INTEGER},
      </if>
      <if test="resultArguments != null">
        #{resultArguments,jdbcType=VARCHAR},
      </if>
      <if test="errorCode != null">
        #{errorCode,jdbcType=VARCHAR},
      </if>
      <if test="result != null">
        #{result,jdbcType=VARCHAR},
      </if>
      <if test="callExample != null">
        #{callExample,jdbcType=VARCHAR},
      </if>
      <if test="appKey != null">
        #{appKey,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null">
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="edu.zju.ccnt.service.model.Api">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update api
    <set>
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="mark != null">
        mark = #{mark,jdbcType=VARCHAR},
      </if>
      <if test="apiAddress != null">
        api_address = #{apiAddress,jdbcType=VARCHAR},
      </if>
      <if test="path != null">
        path = #{path,jdbcType=VARCHAR},
      </if>
      <if test="stripPrefix != null">
        strip_prefix = #{stripPrefix,jdbcType=INTEGER},
      </if>
      <if test="description != null">
        description = #{description,jdbcType=VARCHAR},
      </if>
      <if test="apiCallWay != null">
        api_call_way = #{apiCallWay,jdbcType=VARCHAR},
      </if>
      <if test="apiIntroduction != null">
        api_introduction = #{apiIntroduction,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="serviceId != null">
        service_id = #{serviceId,jdbcType=INTEGER},
      </if>
      <if test="checked != null">
        checked = #{checked,jdbcType=INTEGER},
      </if>
      <if test="remarks != null">
        remarks = #{remarks,jdbcType=VARCHAR},
      </if>
      <if test="arguments != null">
        arguments = #{arguments,jdbcType=VARCHAR},
      </if>
      <if test="callLimit != null">
        call_limit = #{callLimit,jdbcType=INTEGER},
      </if>
      <if test="callIpLimit != null">
        call_ip_limit = #{callIpLimit,jdbcType=INTEGER},
      </if>
      <if test="resultArguments != null">
        result_arguments = #{resultArguments,jdbcType=VARCHAR},
      </if>
      <if test="errorCode != null">
        error_code = #{errorCode,jdbcType=VARCHAR},
      </if>
      <if test="result != null">
        result = #{result,jdbcType=VARCHAR},
      </if>
      <if test="callExample != null">
        call_example = #{callExample,jdbcType=VARCHAR},
      </if>
      <if test="appKey != null">
        app_key = #{appKey,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null">
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="edu.zju.ccnt.service.model.Api">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update api
    set name = #{name,jdbcType=VARCHAR},
      mark = #{mark,jdbcType=VARCHAR},
      api_address = #{apiAddress,jdbcType=VARCHAR},
      path = #{path,jdbcType=VARCHAR},
      strip_prefix = #{stripPrefix,jdbcType=INTEGER},
      description = #{description,jdbcType=VARCHAR},
      api_call_way = #{apiCallWay,jdbcType=VARCHAR},
      api_introduction = #{apiIntroduction,jdbcType=VARCHAR},
      status = #{status,jdbcType=INTEGER},
      service_id = #{serviceId,jdbcType=INTEGER},
      checked = #{checked,jdbcType=INTEGER},
      remarks = #{remarks,jdbcType=VARCHAR},
      arguments = #{arguments,jdbcType=VARCHAR},
      call_limit = #{callLimit,jdbcType=INTEGER},
      call_ip_limit = #{callIpLimit,jdbcType=INTEGER},
      result_arguments = #{resultArguments,jdbcType=VARCHAR},
      error_code = #{errorCode,jdbcType=VARCHAR},
      result = #{result,jdbcType=VARCHAR},
      call_example = #{callExample,jdbcType=VARCHAR},
      app_key = #{appKey,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      update_time = #{updateTime,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=INTEGER}
  </update>

  <select id="selectByNameAndServiceId" parameterType="map" resultType="int">
    select count(1)
    from api
    where name = #{name}
    and service_id = #{serviceId}
  </select>

  <select id="selectByApiAddress" parameterType="string" resultType="int">
    select count(1)
    from api
    where api_address = #{apiAddress}
  </select>


  <select id="selectApiCoreInfo" resultMap="apiInfo">
    SELECT *
    FROM <include refid="tableName"/>
  </select>

  <select id="selectByServiceIdAndStatus" resultMap="BaseResultMap" parameterType="map">
    select
    <include refid="Base_Column_List" />
    from api
    where service_id = #{serviceId}
    <if test="checked != null">
      and checked = #{checked}
    </if>
    <if test="status != null">
      and status = #{status}
    </if>
  </select>

  <select id="selectByServiceIdsAndStatus" resultMap="BaseResultMap" parameterType="map">
    select
    <include refid="Base_Column_List" />
    from api
    where service_id IN
    <foreach item="item" index="index" open="(" separator="," close=")" collection="serviceIdList">
      #{item}
    </foreach>
    <if test="checked != null">
      and checked = #{checked}
    </if>
    <if test="status != null">
      and status = #{status}
    </if>
  </select>



  <select id="selectApiCoreInfoByApiPath" resultMap="apiInfo">
    SELECT *
    FROM <include refid="tableName"/>
    WHERE path = #{apiPath}
  </select>

  <select id="selectByPathList" parameterType="collection" resultType="int">
    select count(1)
    from api
    where
    path in
    <foreach item="item" index="index" open="(" separator="," close=")" collection="pathList">
      #{item}
    </foreach>
  </select>

  <select id="selectByPathAndApiId" resultType="int" parameterType="map">
    select count(1)
    from api
    where
    path = #{path}
    and id != #{apiId}
  </select>

  <select id="selectByApiAddressAndApiId" resultType="int" parameterType="map">
    select count(1)
    from api
    where
    api_address = #{apiAddress}
    and id != #{apiId}
  </select>

  <select id="selectByNameAndServiceIdAndApiId" parameterType="map" resultType="int">
    select count(1)
    from api
    where name = #{name}
    and service_id = #{serviceId}
    and id != #{apiId}
  </select>

  <select id="selectByPath" resultMap="BaseResultMap" parameterType="map">
    select
    <include refid="Base_Column_List" />
    from api
    where path = #{path}
    <if test="checked != null">
      and checked = #{checked}
    </if>
    <if test="status != null">
      and status = #{status}
    </if>
  </select>
</mapper>